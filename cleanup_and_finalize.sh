#!/bin/bash
# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð¸ Ñ„Ð¸Ð½Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
# Ð¡Ð¾Ð·Ð´Ð°Ð½: 2026-01-30 15:25

echo "ðŸ§¹ ÐžÐ§Ð˜Ð¡Ð¢ÐšÐ Ð˜ Ð¤Ð˜ÐÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð¯ ÐŸÐ ÐžÐ•ÐšÐ¢Ð"
echo "================================="

# 1. ÐžÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 3 Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð° Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
echo "\nðŸ“‚ ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²..."
cd barkery_bot/temp

# Ð¡Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»Ñ‹
total_files=$(ls -1 | wc -l)
echo "   Ð’ÑÐµÐ³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²: $total_files"

# ÐžÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 3 Ñ„Ð°Ð¹Ð»Ð° ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ‚Ð¸Ð¿Ð°
for prefix in fix test analysis; do
    echo "   ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ñ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ¾Ð¼ '$prefix'..."
    ls -t ${prefix}* 2>/dev/null | tail -n +4 | xargs rm -f 2>/dev/null || true
done

# Ð£Ð´Ð°Ð»ÑÐµÐ¼ Ð¾Ñ‡ÐµÐ½ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ (ÑÑ‚Ð°Ñ€ÑˆÐµ 1 Ð´Ð½Ñ)
find . -name "*.py" -mtime +1 -delete 2>/dev/null || true

remaining=$(ls -1 | wc -l)
echo "   ÐžÑÑ‚Ð°Ð»Ð¾ÑÑŒ Ñ„Ð°Ð¹Ð»Ð¾Ð²: $remaining"

cd ../..

# 2. Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð¾Ñ‚Ñ‡ÐµÑ‚
echo "\nðŸ“„ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ð¾Ð³Ð¾ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð°..."
cat > PROJECT_STATUS.md << 'PROJECTREPORT'
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Barkery Bot
**Ð”Ð°Ñ‚Ð°:** $(date +"%Y-%m-%d %H:%M")

## ðŸ“‹ Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### âœ… Ð’Ð«ÐŸÐžÐ›ÐÐ•ÐÐÐ«Ð• Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð¯

#### 1. Ð£Ð´Ð°Ð»ÐµÐ½ Ñ‚ÐµÐºÑÑ‚ Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ
- **Ð¤Ð°Ð¹Ð»:** `handlers.py`
- **Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ:** Ð£Ð´Ð°Ð»ÐµÐ½Ð° ÑÑ‚Ñ€Ð¾ÐºÐ° "3. Ð”Ð¾ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 24 Ñ‡Ð°ÑÐ¾Ð²"

#### 2. Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²
- **Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ:** `show_product()` Ð² `handlers.py`
- **Ð›Ð¾Ð³Ð¸ÐºÐ°:**
  - Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· `send_photo()`
  - Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ Ð±ÐµÐ· Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· `edit_text()`
  - Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð° fallback-Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…

#### 3. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ
- **Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ:** `back_to_products()` Ð² `handlers.py`
- **Ð›Ð¾Ð³Ð¸ÐºÐ°:** Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ€Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð½Ð¾Ð²Ñ‹Ñ… Ð´Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸

#### 4. Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹
- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ `InlineKeyboardMarkup` Ð¸ `InlineKeyboardButton`

#### 5. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð±ÑÐºÐ°Ð¿Ð°Ð¼Ð¸
- Ð¡Ð¾Ð·Ð´Ð°Ð½Ñ‹ Ð±ÑÐºÐ°Ð¿Ñ‹ Ð¿ÐµÑ€ÐµÐ´ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸ÑÐ¼Ð¸
- Ð£Ð´Ð°Ð»ÐµÐ½Ñ‹ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹ (Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾ Ð¿Ð¾ 2 Ð½Ð° Ñ„Ð°Ð¹Ð»)

### ðŸ§ª ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜

#### Ð¡Ð¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:
- âœ… `handlers.py` - ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ
- âœ… `admin.py` - ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ  
- âœ… `services.py` - ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ
- âœ… `keyboards.py` - ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ

#### Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:
- âœ… `send_photo()` Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð² ÐºÐ¾Ð´Ðµ
- âœ… Ð¢ÐµÐºÑÑ‚ Ð¾ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐµ ÑƒÐ´Ð°Ð»ÐµÐ½
- âœ… Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹
- âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ `.env` Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð°

### ðŸš€ Ð—ÐÐŸÐ£Ð¡Ðš ÐŸÐ ÐžÐ•ÐšÐ¢Ð

#### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ:
1. Python 3.8+
2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸: `pip install -r requirements.txt`
3. ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹ `.env` Ñ„Ð°Ð¹Ð» Ñ:
   - `BOT_TOKEN` (Ð¾Ñ‚ @BotFather)
   - `ADMIN_ID` (Ð²Ð°Ñˆ Telegram ID)

#### Ð—Ð°Ð¿ÑƒÑÐº:
\`\`\`bash
python3 barkery_bot.py
\`\`\`

#### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:
1. **ÐÐ´Ð¼Ð¸Ð½ÐºÐ°:** `/admin` Ð² Ð±Ð¾Ñ‚Ðµ
2. **ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ¸:** `/start` â†’ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼
3. **Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ:** Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð¼Ð¸Ð½ÐºÑƒ

### ðŸ“ Ð¡Ð¢Ð Ð£ÐšÐ¢Ð£Ð Ð ÐŸÐ ÐžÐ•ÐšÐ¢Ð

\`\`\`
barkery_bot/
â”œâ”€â”€ *.py                    # ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
â”œâ”€â”€ barkery_bot/
â”‚   â”œâ”€â”€ backup/            # Ð‘ÑÐºÐ°Ð¿Ñ‹ (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ)
â”‚   â””â”€â”€ temp/              # Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ°)
â”œâ”€â”€ .env                   # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ (Ð½Ðµ Ð² Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸)
â””â”€â”€ requirements.txt       # Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
\`\`\`

### âš ï¸ Ð˜Ð—Ð’Ð•Ð¡Ð¢ÐÐ«Ð• ÐžÐ“Ð ÐÐÐ˜Ð§Ð•ÐÐ˜Ð¯

1. **Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ:** Ð Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ `file_id` Ð¾Ñ‚ Telegram
2. **ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ:** ÐŸÑ€Ð¸ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ðµ Ð½Ð°Ð·Ð°Ð´ ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
3. **Ð‘ÑÐºÐ°Ð¿Ñ‹:** ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð‘Ð” Ð±ÑÐºÐ°Ð¿Ð¾Ð² Ð½Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾

### ðŸ“ž ÐŸÐžÐ”Ð”Ð•Ð Ð–ÐšÐ

ÐŸÑ€Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ½Ð¾Ð²ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ð² ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚Ð¸ `.env` Ñ„Ð°Ð¹Ð»Ð°
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:** âœ… Ð“ÐžÐ¢ÐžÐ’ Ðš Ð­ÐšÐ¡ÐŸÐ›Ð£ÐÐ¢ÐÐ¦Ð˜Ð˜
PROJECTREPORT

echo "âœ… Ð˜Ñ‚Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ Ð¾Ñ‚Ñ‡ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½: PROJECT_STATUS.md"

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ Ñ„Ð°Ð¹Ð»Ð¾Ð²
echo "\nðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:"
echo "   handlers.py: $(wc -l < handlers.py) ÑÑ‚Ñ€Ð¾Ðº"
echo "   admin.py: $(wc -l < admin.py) ÑÑ‚Ñ€Ð¾Ðº"
echo "   Ð’ÑÐµÐ³Ð¾ Python Ñ„Ð°Ð¹Ð»Ð¾Ð²: $(find . -name "*.py" -type f | wc -l)"
echo "   Ð Ð°Ð·Ð¼ÐµÑ€ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: $(du -sh . | cut -f1)"

# 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
echo "\nðŸ”§ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹..."
if [ -f "requirements.txt" ]; then
    echo "   requirements.txt: Ð¿Ñ€Ð¸ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚"
    echo "   ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹: $(wc -l < requirements.txt)"
else
    echo "   âš ï¸  requirements.txt Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚"
fi

echo "\n================================="
echo "ðŸŽ‰ ÐŸÐ ÐžÐ•ÐšÐ¢ Ð“ÐžÐ¢ÐžÐ’ Ðš Ð˜Ð¡ÐŸÐžÐ›Ð¬Ð—ÐžÐ’ÐÐÐ˜Ð®!"
echo "\nÐ¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑˆÐ°Ð³Ð¸:"
echo "1. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð±Ð¾Ñ‚Ð°: python3 barkery_bot.py"
echo "2. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram Ð¸ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð°"
echo "3. ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»:"
echo "   - /start - Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ"
echo "   - /admin - Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"
echo "4. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸ Ñ‡ÐµÑ€ÐµÐ· Ð°Ð´Ð¼Ð¸Ð½ÐºÑƒ"
echo "\nÐ£Ð´Ð°Ñ‡Ð¸! ðŸš€"
